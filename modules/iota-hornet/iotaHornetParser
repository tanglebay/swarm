#!/bin/bash

if [ -z "$iotaHornetVersion" ]; then
    source $iotaHornetModule/iotaHornetVersion
fi

source $swarmConfigs/iota-hornet.cfg

source $iotaHornetModule/iotaHornetConfigs

source $iotaHornetModule/iotaHornetConfigCheck

#############################################################################################

source $iotaHornetConfigParsers/iotaHornetAlias

source $iotaHornetConfigParsers/iotaHornetApiEnabled

source $iotaHornetConfigParsers/iotaHornetApiJwtSalt

source $iotaHornetConfigParsers/iotaHornetApiJwtToken

source $iotaHornetConfigParsers/iotaHornetApiPort

source $iotaHornetConfigParsers/iotaHornetApiPublicRoutes

source $iotaHornetConfigParsers/iotaHornetAutopeeringEnabled

source $iotaHornetConfigParsers/iotaHornetAutopeeringPort

source $iotaHornetConfigParsers/iotaHornetDbPath

source $iotaHornetConfigParsers/iotaHornetEntrynodes

source $iotaHornetConfigParsers/iotaHornetGossipPort

source $iotaHornetConfigParsers/iotaHornetGossipUnknownPeersLimit

source $iotaHornetConfigParsers/iotaHornetIdentity

source $iotaHornetConfigParsers/iotaHornetInxAddress

source $iotaHornetConfigParsers/iotaHornetInxEnabled

source $iotaHornetConfigParsers/iotaHornetInxPowWorkerCount

source $iotaHornetConfigParsers/iotaHornetPowEnabled

source $iotaHornetConfigParsers/iotaHornetPowWorkerCount

source $iotaHornetConfigParsers/iotaHornetProfiling

source $iotaHornetConfigParsers/iotaHornetPrometheus

source $iotaHornetConfigParsers/iotaHornetPruningCooldownTime

source $iotaHornetConfigParsers/iotaHornetPruningDatabaseSize

source $iotaHornetConfigParsers/iotaHornetPruningEnabled

source $iotaHornetConfigParsers/iotaHornetPruningMilestones

source $iotaHornetConfigParsers/iotaHornetPruningPercentage

source $iotaHornetConfigParsers/iotaHornetRunAsEntryNode

source $iotaHornetConfigParsers/iotaHornetSnapshotsEnabled

source $iotaHornetConfigParsers/iotaHornetSnapshotsInterval

source $iotaHornetConfigParsers/iotaHornetSnapshotsPath

source $iotaHornetConfigParsers/iotaHornetSnapshotsUrls

source $iotaHornetConfigParsers/iotaHornetUpdateCheck

source $iotaHornetConfigParsers/iotaHornetRestApiPort

# Chrysalis only
source $iotaHornetConfigParsers/iotaHornetDisablePlugins

source $iotaHornetConfigParsers/iotaHornetEnablePlugins

source $iotaHornetConfigParsers/iotaHornetMqtt

source $iotaHornetConfigParsers/iotaHornetDashboardUsername

source $iotaHornetConfigParsers/iotaHornetDashboardPasswordHash

source $iotaHornetConfigParsers/iotaHornetDashboardPasswordSalt

source $iotaHornetConfigParsers/iotaHornetDashboardPort

# Set file permissions
sudo chown hornet:hornet $iotaHornetHome/*.json > /dev/null 2>&1

# Unset all var
unset parser
