#!/bin/bash

if [ ! -d "/etc/nginx/swarm/goshimmer" ]; then
    sudo mkdir -p /etc/nginx/swarm/goshimmer
fi

if [ "$goshimmerDashboardAuthEnabled" = "true" ]; then
    sudo echo "auth_basic \"Restricted\";" > /etc/nginx/swarm/goshimmer/dashboardauth.conf
    sudo echo "auth_basic_user_file /etc/nginx/swarm/goshimmer/.htpasswd_dashboard;" >> /etc/nginx/swarm/goshimmer/dashboardauth.conf
    if [ -f "/usr/sbin/nginx" ]; then
        sudo systemctl reload nginx > /dev/null 2>&1
    fi
else
    sudo echo "" > /etc/nginx/swarm/goshimmer/dashboardauth.conf > /dev/null 2>&1
    if [ -f "/usr/sbin/nginx" ]; then
        sudo systemctl reload nginx > /dev/null 2>&1
    fi
fi
