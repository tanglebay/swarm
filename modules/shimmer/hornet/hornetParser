#!/bin/bash

source $shimmerHornetModules/hornetConfigs

# Run Config checks
source $shimmerHornetModules/hornetConfigCheck

if [ -z "$shimmerHornetVersion" ]; then
    source $shimmerHornetModules/hornetVersion
fi

#############################################################################################

source $shimmerHornetConfigParsers/hornetAutoRevalidation

source $shimmerHornetConfigParsers/hornetDisablePlugins

source $shimmerHornetConfigParsers/hornetEnablePlugins

source $shimmerHornetConfigParsers/hornetGossipUnknownPeersLimit

source $shimmerHornetConfigParsers/hornetSnapshotInterval

source $shimmerHornetConfigParsers/hornetSnapshotUrls

source $shimmerHornetConfigParsers/hornetMqtt

source $shimmerHornetConfigParsers/hornetGossipPort

source $shimmerHornetConfigParsers/hornetAutopeeringPort

source $shimmerHornetConfigParsers/hornetPowEnabled

source $shimmerHornetConfigParsers/hornetPowWorkerCount

source $shimmerHornetConfigParsers/hornetPruningEnabled

source $shimmerHornetConfigParsers/hornetPruningMilestones

source $shimmerHornetConfigParsers/hornetPruningDatabaseSize

source $shimmerHornetConfigParsers/hornetPruningPercentage

source $shimmerHornetConfigParsers/hornetPruningCooldownTime

source $shimmerHornetConfigParsers/hornetDashboardUsername

source $shimmerHornetConfigParsers/hornetDashboardPasswordHash

source $shimmerHornetConfigParsers/hornetDashboardPasswordSalt

source $shimmerHornetConfigParsers/hornetIdentity

source $shimmerHornetConfigParsers/hornetAlias

source $shimmerHornetConfigParsers/hornetRunAsEntryNode

source $shimmerHornetConfigParsers/hornetEntrynodes

source $shimmerHornetConfigParsers/hornetDashboardPort

source $shimmerHornetConfigParsers/hornetRestApiPort

source $shimmerHornetConfigParsers/hornetPrometheus

source $shimmerHornetConfigParsers/hornetApiJwtSalt

source $shimmerHornetConfigParsers/hornetApiJwtToken

source $shimmerHornetConfigParsers/hornetApiPublicRoutes

# Set file permissions
sudo chown hornet:hornet $shimmerHornetHome/*.json > /dev/null 2>&1

# Unset all var
unset parser
