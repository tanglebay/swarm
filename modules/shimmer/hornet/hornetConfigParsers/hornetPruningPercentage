#!/bin/bash

if [ -z "$hornetShimmerPruningPercentage" ]; then
    hornetShimmerPruningPercentage=5
else
    hornetShimmerPruningPercentage=$(echo ${hornetShimmerPruningPercentage%.*})
fi

if [ "$hornetShimmerPruning" = "true" ]; then
    parser="$(jq '.pruning.size.thresholdPercentage' $hornetShimmerHome/$hornetShimmerConfig.json)"
    if [ "$parser" != "$hornetShimmerPruningPercentage" ]; then
        sudo jq '.pruning.size.thresholdPercentage = '$hornetShimmerPruningPercentage'' $hornetShimmerHome/$hornetShimmerConfig.json|sponge $hornetShimmerHome/$hornetShimmerConfig.json
        restartShimmerHornet=true
        echo "hornetShimmerPruningPercentage" >> /tmp/hornetShimmerParsing
    fi
fi
