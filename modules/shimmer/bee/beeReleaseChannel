#!/bin/bash

# Check if release is changed
if [ "$beeShimmerRelease" != "$currentBeeShimmerRelease" ]; then
    {
        echo 0
        echo 20
        source $beeShimmerModules/beeShimmerRemoval
        echo 40
        source $beeShimmerModules/beeShimmerInstaller
        echo 60
        source $beeShimmerModules/beeParser
        echo 80
        if [ "$beeShimmerUpdated" = "true" ] || [ "$restartBeeShimmer" = "true" ]; then
            sudo systemctl restart bee-shimmer
            unset restartBeeShimmer
        fi
        echo 100
    } | whiptail --gauge "Please wait while Bee-Shimmer is prepared..." 8 65 0
    whiptail --title "Bee-Shimmer - Configuration" --msgbox "New release channel ($beeShimmerRelease) applied and Bee-Shimmer was reinstalled!" 8 65
fi