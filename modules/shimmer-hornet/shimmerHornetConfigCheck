#!/bin/bash

checkConfigFile=$(cat $shimmerHornetHome/$shimmerHornetConfig.json)
if [ -z "$checkConfigFile" ] || [ ! -f "$shimmerHornetHome/$shimmerHornetConfig.json" ]; then
    if [ "$shimmerHornetRelease" = "stable" ]; then
        if [ -f "$shimmerHornetHome/$shimmerHornetConfig.json" ]; then
            sudo chown hornet:hornet $shimmerHornetHome/$shimmerHornetConfig.json > /dev/null 2>&1
        fi
        sudo -u hornet wget -q -O $shimmerHornetHome/$shimmerHornetConfig.json https://raw.githubusercontent.com/iotaledger/hornet/shimmer/config_defaults.json
    else
        if [ -f "$shimmerHornetHome/$shimmerHornetConfig.json" ]; then
            sudo chown hornet:hornet $shimmerHornetHome/$shimmerHornetConfig.json > /dev/null 2>&1
        fi
        sudo -u hornet wget -q -O $shimmerHornetHome/$shimmerHornetConfig.json https://raw.githubusercontent.com/iotaledger/hornet/develop/config_defaults.json
    fi
fi

if [ -f "/tmp/shimmerHornetParsing" ]; then
    sudo rm -rf /tmp/shimmerHornetParsing > /dev/null 2>&1
fi

unset checkConfigFile