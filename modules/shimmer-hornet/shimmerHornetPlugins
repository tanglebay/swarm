#!/bin/bash

if [ "$useShimmerHornetEnablePlugins" = "true" ]; then
    shimmerHornetPlugins=$shimmerHornetEnablePlugins
fi
if [ "$useShimmerHornetDisablePlugins" = "true" ]; then
    shimmerHornetPlugins=$shimmerHornetDisablePlugins
fi

### PLUGINS ###

# Autopeering
if [[ $shimmerHornetPlugins = *autopeering* ]]; then
    shimmerHornetPluginAutopeering=ON
    if [ "$ufw" = "true" ]; then
        sudo ufw allow $shimmerHornetAutopeeringPort/udp > /dev/null 2>&1
    fi
else
    shimmerHornetPluginAutopeering=OFF
    if [ "$ufw" = "true" ]; then
        sudo ufw delete allow $shimmerHornetAutopeeringPort/udp > /dev/null 2>&1
    fi
fi

# INX
if [[ $shimmerHornetPlugins = *inx* ]]; then
    shimmerHornetPluginInx=ON
else
    shimmerHornetPluginInx=OFF
fi

# Dashboard
if [[ $shimmerHornetPlugins = *dashboard* ]]; then
    shimmerHornetPluginDashboard=ON
    source $proxyModules/proxyShimmerDashboard
else
    shimmerHornetPluginDashboard=OFF
    source $proxyModules/proxyShimmerDashboard
fi

# INDEXER
if [[ $shimmerHornetPlugins = *indexer* ]]; then
    shimmerHornetPluginIndexer=ON
else
    shimmerHornetPluginIndexer=OFF
fi

# MQTT
if [[ $shimmerHornetPlugins = *mqtt* ]]; then
    shimmerHornetPluginMqtt=ON
    source $proxyModules/proxyShimmerMqtt
else
    shimmerHornetPluginMqtt=OFF
    source $proxyModules/proxyShimmerMqtt
fi

# Warpsync
if [[ $shimmerHornetPlugins = *warpsync* ]]; then
    shimmerHornetPluginWarpsync=ON
else
    shimmerHornetPluginWarpsync=OFF
fi

# Prometheus
if [[ $shimmerHornetPlugins = *prometheus* ]]; then
    shimmerHornetPluginPrometheus=ON
else
    shimmerHornetPluginPrometheus=OFF
fi

# Participation
if [[ $shimmerHornetPlugins = *participation* ]]; then
    shimmerHornetPluginParticipation=ON
else
    shimmerHornetPluginParticipation=OFF
fi

unset shimmerHornetPlugins