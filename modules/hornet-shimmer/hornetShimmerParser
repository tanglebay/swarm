#!/bin/bash

source $hornetShimmerModules/hornetShimmerConfigs

# Run Config checks
source $hornetShimmerModules/hornetShimmerConfigCheck

if [ -z "$hornetShimmerVersion" ]; then
    source $hornetShimmerModules/hornetShimmerVersion
fi

#############################################################################################

source $hornetShimmerConfigParsers/hornetShimmerAutoRevalidation

source $hornetShimmerConfigParsers/hornetShimmerDisablePlugins

source $hornetShimmerConfigParsers/hornetShimmerEnablePlugins

source $hornetShimmerConfigParsers/hornetShimmerGossipUnknownPeersLimit

source $hornetShimmerConfigParsers/hornetShimmerSnapshotInterval

source $hornetShimmerConfigParsers/hornetShimmerSnapshotUrls

source $hornetShimmerConfigParsers/hornetShimmerMqtt

source $hornetShimmerConfigParsers/hornetShimmerGossipPort

source $hornetShimmerConfigParsers/hornetShimmerAutopeeringPort

source $hornetShimmerConfigParsers/hornetShimmerPowEnabled

source $hornetShimmerConfigParsers/hornetShimmerPowWorkerCount

source $hornetShimmerConfigParsers/hornetShimmerPruningEnabled

source $hornetShimmerConfigParsers/hornetShimmerPruningMilestones

source $hornetShimmerConfigParsers/hornetShimmerPruningDatabaseSize

source $hornetShimmerConfigParsers/hornetShimmerPruningPercentage

source $hornetShimmerConfigParsers/hornetShimmerPruningCooldownTime

source $hornetShimmerConfigParsers/hornetShimmerDashboardUsername

source $hornetShimmerConfigParsers/hornetShimmerDashboardPasswordHash

source $hornetShimmerConfigParsers/hornetShimmerDashboardPasswordSalt

source $hornetShimmerConfigParsers/hornetShimmerIdentity

source $hornetShimmerConfigParsers/hornetShimmerAlias

source $hornetShimmerConfigParsers/hornetShimmerRunAsEntryNode

# source $hornetShimmerConfigParsers/hornetShimmerEntrynodes

source $hornetShimmerConfigParsers/hornetShimmerDashboardPort

source $hornetShimmerConfigParsers/hornetShimmerRestApiPort

source $hornetShimmerConfigParsers/hornetShimmerPrometheus

source $hornetShimmerConfigParsers/hornetShimmerApiJwtSalt

source $hornetShimmerConfigParsers/hornetShimmerApiJwtToken

source $hornetShimmerConfigParsers/hornetShimmerApiPublicRoutes

# Set file permissions
sudo chown hornet:hornet $hornetShimmerHome/config*.json > /dev/null 2>&1

# Unset all var
unset parser
