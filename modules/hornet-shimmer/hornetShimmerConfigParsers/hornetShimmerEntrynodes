#!/bin/bash
if [ "$hornetNetwork" = "mainnet" ]; then
    parser="$(jq '.p2p.autopeering.entryNodes' $hornetShimmerHome/config.json)"

    entryHornetShimmerNode="/dns/entry-0.shimmernet.tanglebay.com/udp/14636/autopeering/iot4By1FD4pFLrGJ6AAe7YEeSu9RbW9xnPUmxMdQenC"
    if [[ $parser = *$entryHornetShimmerNode* ]]; then
        sudo jq '.p2p.autopeering.entryNodes |= .- ["'$entryHornetShimmerNode'"]' $hornetShimmerHome/config.json|sponge $hornetShimmerHome/config.json
        restartHornetShimmer=true
        echo "hornetShimmerEntrynodes" >> /tmp/hornetShimmerParsing
    fi
    entryHornetShimmerNode="/dns/entry-1.shimmernet.tanglebay.com/udp/14626/autopeering/CATsx21mFVvQQPXeDineGs9DDeKvoBBQdzcmR6ffCkVA"
    if [[ $parser = *$entryHornetShimmerNode* ]]; then
        sudo jq '.p2p.autopeering.entryNodes |= .- ["'$entryHornetShimmerNode'"]' $hornetShimmerHome/config.json|sponge $hornetShimmerHome/config.json
        restartHornetShimmer=true
        echo "hornetShimmerEntrynodes" >> /tmp/hornetShimmerParsing
    fi
    ####################################################################################################################################################
    entryHornetShimmerNode="/dns/entry-0.shimmer-mainnet.tanglebay.com/udp/14636/autopeering/iot4By1FD4pFLrGJ6AAe7YEeSu9RbW9xnPUmxMdQenC"
    if [[ $parser != *$entryHornetShimmerNode* ]]; then
        sudo jq '.p2p.autopeering.entryNodes |= .+ ["'$entryHornetShimmerNode'"]' $hornetShimmerHome/config.json|sponge $hornetShimmerHome/config.json
        restartHornetShimmer=true
        echo "hornetShimmerEntrynodes" >> /tmp/hornetShimmerParsing
    fi
    entryHornetShimmerNode="/dns/entry-1.shimmer-mainnet.tanglebay.com/udp/14626/autopeering/CATsx21mFVvQQPXeDineGs9DDeKvoBBQdzcmR6ffCkVA"
    if [[ $parser != *$entryHornetShimmerNode* ]]; then
        sudo jq '.p2p.autopeering.entryNodes |= .+ ["'$entryHornetShimmerNode'"]' $hornetShimmerHome/config.json|sponge $hornetShimmerHome/config.json
        restartHornetShimmer=true
        echo "hornetShimmerEntrynodes" >> /tmp/hornetShimmerParsing
    fi
    unset parser entryHornetShimmerNode
fi