#!/bin/bash

# Check if network changed
if [ "$hornetShimmerNetwork" != "$currentHornetShimmerNetwork" ]; then
    if [ "$hornetShimmerNetwork" = "mainnet" ]; then
        echo "" > /etc/default/hornet-shimmer
    fi
    if [ "$hornetShimmerNetwork" = "devnet" ]; then
        echo "OPTIONS=\"--config config_devnet.json\"" > /etc/default/hornet-shimmer
    fi
    if [ "$hornetShimmerNetwork" = "comnet" ]; then
        echo "OPTIONS=\"--config config_comnet.json\"" > /etc/default/hornet-shimmer
    fi
    sudo rm -rf $hornetShimmerHome/snapshots/$currentHornetShimmerNetwork $hornetShimmerHome/${currentHornetShimmerNetwork}db $hornetShimmerHome/config*db $hornetShimmerHome/db $hornetShimmerHome/p2pstore
    source $hornetShimmerConfigParsers/hornetShimmerIdentity
    restartHornetShimmer=true
    newHornetShimmerApiJwtToken=true
    whiptail --title "Hornet Shimmer - Configuration" --msgbox "Hornet was successfully changed to the $hornetShimmerNetwork network!" 8 65
fi