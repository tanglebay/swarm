#!/bin/bash
if [ "$iotaNodeNetwork" = "mainnet" ]; then
    iotaNodeFullSnapshot="https://cdn.tanglebay.com/snapshots/iota-mainnet/full_snapshot.bin"
    iotaNodeDeltaSnapshot="https://cdn.tanglebay.com/snapshots/iota-mainnet/delta_snapshot.bin"
    parser="$(jq '.snapshots.downloadURLs' $iotaNodePath/config.json)"
    if [[ $parser != *$iotaNodeFullSnapshot* ]] && [[ $parser != *$iotaNodeDeltaSnapshot* ]]; then
        sudo jq '.snapshots.downloadURLs[.snapshots.downloadURLs| length] |= . + {"full": "'$iotaNodeFullSnapshot'","delta": "'$iotaNodeDeltaSnapshot'"}' $iotaNodePath/config.json|sponge $iotaNodePath/config.json
        restartIotaNode=true
        echo "iotaNodeSnapshotUrl" >> /tmp/iotaNodeParsing
    fi
    unset parser iotaNodeFullSnapshot
fi