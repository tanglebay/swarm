#!/bin/bash
if [ "$iotaNodeNetwork" = "mainnet" ] || [ "$iotaNodeNetwork" = "testnet" ]; then
    parser="$(jq '.p2p.autopeering.entryNodes' $iotaNodePath/config.json)"
    iotaNodeEntryNode="/dns/entry-0.iota-mainnet.tanglebay.com/udp/14626/autopeering/iot4By1FD4pFLrGJ6AAe7YEeSu9RbW9xnPUmxMdQenC"
    if [[ $parser != *$iotaNodeEntryNode* ]]; then
        sudo jq '.p2p.autopeering.entryNodes |= .+ ["'$iotaNodeEntryNode'"]' $iotaNodePath/config.json|sponge $iotaNodePath/config.json
        restartIotaNode=true
        echo "iotaNodeEntrynodes" >> /tmp/iotaNodeParsing
    fi
    iotaNodeEntryNode="/dns/entry-1.iota-mainnet.tanglebay.com/udp/14626/autopeering/CATsx21mFVvQQPXeDineGs9DDeKvoBBQdzcmR6ffCkVA"
    if [[ $parser != *$iotaNodeEntryNode* ]]; then
        sudo jq '.p2p.autopeering.entryNodes |= .+ ["'$iotaNodeEntryNode'"]' $iotaNodePath/config.json|sponge $iotaNodePath/config.json
        restartIotaNode=true
        echo "iotaNodeEntrynodes" >> /tmp/iotaNodeParsing
    fi
    unset parser iotaNodeEntryNode
fi