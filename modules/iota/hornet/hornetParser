#!/bin/bash

source $iotaHornetModules/hornetConfigs

# Run Config checks
source $iotaHornetModules/hornetConfigCheck

if [ -z "$iotaHornetVersion" ]; then
    source $iotaHornetModules/hornetVersion
fi

#############################################################################################

source $iotaHornetConfigParsers/hornetAutoRevalidation

source $iotaHornetConfigParsers/hornetDisablePlugins

source $iotaHornetConfigParsers/hornetEnablePlugins

source $iotaHornetConfigParsers/hornetGossipUnknownPeersLimit

source $iotaHornetConfigParsers/hornetSnapshotInterval

source $iotaHornetConfigParsers/hornetSnapshotUrls

source $iotaHornetConfigParsers/hornetMqtt

source $iotaHornetConfigParsers/hornetGossipPort

source $iotaHornetConfigParsers/hornetAutopeeringPort

source $iotaHornetConfigParsers/hornetPowEnabled

source $iotaHornetConfigParsers/hornetPowWorkerCount

source $iotaHornetConfigParsers/hornetPruningEnabled

source $iotaHornetConfigParsers/hornetPruningMilestones

source $iotaHornetConfigParsers/hornetPruningDatabaseSize

source $iotaHornetConfigParsers/hornetPruningPercentage

source $iotaHornetConfigParsers/hornetPruningCooldownTime

source $iotaHornetConfigParsers/hornetDashboardUsername

source $iotaHornetConfigParsers/hornetDashboardPasswordHash

source $iotaHornetConfigParsers/hornetDashboardPasswordSalt

source $iotaHornetConfigParsers/hornetIdentity

source $iotaHornetConfigParsers/hornetAlias

source $iotaHornetConfigParsers/hornetRunAsEntryNode

source $iotaHornetConfigParsers/hornetEntrynodes

source $iotaHornetConfigParsers/hornetDashboardPort

source $iotaHornetConfigParsers/hornetRestApiPort

source $iotaHornetConfigParsers/hornetPrometheus

source $iotaHornetConfigParsers/hornetApiJwtSalt

source $iotaHornetConfigParsers/hornetApiJwtToken

source $iotaHornetConfigParsers/hornetApiPublicRoutes

# Set file permissions
sudo chown hornet:hornet $iotaHornetHome/*.json > /dev/null 2>&1

# Unset all var
unset parser
