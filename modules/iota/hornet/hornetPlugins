#!/bin/bash

if [ "$useIotaHornetEnablePlugins" = "true" ]; then
    iotaHornetPlugins=$iotaHornetEnablePlugins
fi
if [ "$useIotaHornetDisablePlugins" = "true" ]; then
    iotaHornetPlugins=$iotaHornetDisablePlugins
fi

### PLUGINS ###

# Autopeering
if [[ $iotaHornetPlugins = *autopeering* ]]; then
    iotaHornetPluginAutopeering=ON
    if [ "$ufw" = "true" ]; then
        sudo ufw allow $iotaHornetAutopeeringPort/udp > /dev/null 2>&1
    fi
else
    iotaHornetPluginAutopeering=OFF
    if [ "$ufw" = "true" ]; then
        sudo ufw delete allow $iotaHornetAutopeeringPort/udp > /dev/null 2>&1
    fi
fi

# MQTT
if [[ $iotaHornetPlugins = *mqtt* ]]; then
    iotaHornetPluginMqtt=ON
else
    iotaHornetPluginMqtt=OFF
fi

# Faucet
if [[ $iotaHornetPlugins = *faucet* ]]; then
    iotaHornetPluginFaucet=ON
else
    iotaHornetPluginFaucet=OFF
fi

# Warpsync
if [[ $iotaHornetPlugins = *warpsync* ]]; then
    iotaHornetPluginWarpsync=ON
else
    iotaHornetPluginWarpsync=OFF
fi

# Prometheus
if [[ $iotaHornetPlugins = *prometheus* ]]; then
    iotaHornetPluginPrometheus=ON
else
    iotaHornetPluginPrometheus=OFF
fi

# Participation
if [[ $iotaHornetPlugins = *participation* ]]; then
    iotaHornetPluginParticipation=ON
else
    iotaHornetPluginParticipation=OFF
fi

unset iotaHornetPlugins