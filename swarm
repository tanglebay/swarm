#!/bin/bash
############################################################################################################################################################
############################################################################################################################################################
# DO NOT EDIT THE LINES BELOW !!! DO NOT EDIT THE LINES BELOW !!! DO NOT EDIT THE LINES BELOW !!! DO NOT EDIT THE LINES BELOW !!!
############################################################################################################################################################
############################################################################################################################################################

source /var/lib/swarm/environment

############################################################################################################################################################

# Run PACKAGE module
source $swarmHome/packages

# Get Version
source $swarmHome/version

# Console
source $swarmHome/console

# Run module sudo check
source $swarmHome/requirements

# Run alias module
source $swarmModules/swarmAlias

# Load Theme
source $swarmModules/swarmTheme

# Start main script
exitCode=0
while [ $exitCode -lt 1 ]; do
    clear
    source $swarmModules/swarmConfigs

    ############################################################################################################################################################

    if [ "$version" != "$latestSwarmVersion" ] && [ ! -z "$latestSwarmVersion" ]; then
        swarmVersionText="v$version - New Version v$latestSwarmVersion available!"
    else
        swarmVersionText="v$version"
    fi

    source $swarmModules/swarmAuth

    CHOICE=$(
        whiptail --title "SWARM [$swarmVersionText]" --menu "\nAuth Status: $swarmAuthText\n\nChoose an option:" 24 65 0 \
        "1)" "SWARM Menu" \
        "2)" "Hornet Menu" \
        "3)" "INX Menu" \
        "4)" "GoShimmer Menu" \
        "5)" "WASP Menu" \
        "6)" "Proxy Menu" \
        "7)" "About SWARM" 3>&2 2>&1 1>&3
    )
    exitStatus=$?
    if [ "$exitStatus" = "1" ]; then
        clear
        exit 0
    fi

    case $CHOICE in
        "1)")
            # SWARM Menu
            source $swarmModules/swarmMenu
        ;;
        "2)")
            while [ $exitCode -lt 1 ]; do
                clear
                CHOICE=$(
                    whiptail --title "Hornet" --menu "\nChoose an option" 24 65 0 \
                    "1)" "Hornet [IOTA]" \
                    "2)" "Hornet [SHIMMER]" 3>&2 2>&1 1>&3
                )
                exitstatus=$?
                if [ "$exitstatus" = "1" ]; then
                    exitCode=1
                fi
                case $CHOICE in
                    "1)")
                        source $iotaHornetModules/iotaHornetMenu
                    ;;
                    "2)")
                        source $shimmerHornetModules/shimmerHornetMenu
                    ;;
                esac
            done
            exitCode=0
        ;;
        "3)")
            while [ $exitCode -lt 1 ]; do
                clear
                CHOICE=$(
                    whiptail --title "INX" --menu "\nChoose an option" 24 65 0 \
                    "1)" "[IOTA] INX" \
                    "2)" "[SHIMMER] INX" 3>&2 2>&1 1>&3
                )
                exitstatus=$?
                if [ "$exitstatus" = "1" ]; then
                    exitCode=1
                fi
                case $CHOICE in
                    "1)")
                        # source $iotaInxModules/iotaInxMenu
                    ;;
                    "2)")
                        source $shimmerInxModules/shimmerInxMenu
                    ;;
                esac
            done
            exitCode=0
        ;;
        # "3)")
        #     while [ $exitCode -lt 1 ]; do
        #         clear
        #         CHOICE=$(
        #             whiptail --title "Bee" --menu "\nChoose an option" 24 65 0 \
        #             "1)" "Bee [IOTA]" \
        #             "2)" "Bee [SHIMMER]" 3>&2 2>&1 1>&3
        #         )
        #         exitstatus=$?
        #         if [ "$exitstatus" = "1" ]; then
        #             exitCode=1
        #         fi
        #         case $CHOICE in
        #             "1)")
        #                 source $iotaBeeModules/iotaBeeMenu
        #             ;;
        #             "2)")
        #                 source $shimmerBeeModules/shimmerBeeMenu
        #             ;;
        #         esac
        #     done
        #     exitCode=0
        # ;;
        "4)")
            # GOSHIMMER MENU
            source $goshimmerModules/goshimmerMenu
        ;;
        "5)")
            # WASP MENU
            source $waspModules/waspMenu
        ;;
        "6)")
            # PROXY MENU
            source $proxyModules/proxyMenu
        ;;
        "7)")
            source $swarmHome/about
        ;;
    esac
done

############################################################################################################################################################

exitCode=0
clear
exit 0
